{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "export NPM_CONFIG_CACHE=/tmp/.npm && export DISABLE_NPM_CACHE=true && export NODE_OPTIONS='--max-old-space-size=4096' && export NPM_CONFIG_PROGRESS=false && export NPM_CONFIG_LOGLEVEL=warn && rm -rf node_modules/.cache && rm -rf .cache && rm -rf ~/.npm && rm -rf /tmp/.npm && npm cache clean --force && mkdir -p /tmp/.npm && chmod 755 /tmp/.npm && npm install --no-cache && npm run build"
  },
  "deploy": {
    "startCommand": "export NPM_CONFIG_CACHE=/tmp/.npm && export NODE_OPTIONS='--max-old-space-size=4096' && export NODE_ENV=production && npm run start",
    "healthcheckPath": "/api/health"
  },
  "variables": {
    "NPM_CONFIG_CACHE": "/tmp/.npm",
    "DISABLE_NPM_CACHE": "true",
    "DISABLE_OPENCOLLECTIVE": "true", 
    "NODE_OPTIONS": "--max-old-space-size=4096",
    "KEEP_DEV_DEPENDENCIES": "true",
    "NPM_CONFIG_PROGRESS": "false",
    "NPM_CONFIG_LOGLEVEL": "warn",
    "NPM_CONFIG_AUDIT": "false",
    "NPM_CONFIG_FUND": "false",
    "NPM_CONFIG_UPDATE_NOTIFIER": "false",
    "NODE_ENV": "production"
  }
}